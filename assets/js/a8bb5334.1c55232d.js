"use strict";(self.webpackChunkmodelica_buildings_templates=self.webpackChunkmodelica_buildings_templates||[]).push([[265],{5680:(e,a,n)=>{n.d(a,{xA:()=>m,yg:()=>g});var t=n(6540);function s(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){s(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function r(e,a){if(null==e)return{};var n,t,s=function(e,a){if(null==e)return{};var n,t,s={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var i=t.createContext({}),p=function(e){var a=t.useContext(i),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},m=function(e){var a=p(e.components);return t.createElement(i.Provider,{value:a},e.children)},c="mdxType",y={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,s=e.mdxType,l=e.originalType,i=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),c=p(n),d=s,g=c["".concat(i,".").concat(d)]||c[d]||y[d]||l;return n?t.createElement(g,o(o({ref:a},m),{},{components:n})):t.createElement(g,o({ref:a},m))}));function g(e,a){var n=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var l=n.length,o=new Array(l);o[0]=d;var r={};for(var i in a)hasOwnProperty.call(a,i)&&(r[i]=a[i]);r.originalType=e,r[c]="string"==typeof e?e:s,o[1]=r;for(var p=2;p<l;p++)o[p]=n[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5562:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>o,default:()=>y,frontMatter:()=>l,metadata:()=>r,toc:()=>p});var t=n(8168),s=(n(6540),n(5680));const l={sidebar_position:1},o="Guide",r={unversionedId:"guide",id:"guide",title:"Guide",description:"This document provides some requirements and recommendations for the development of HVAC system templates to be included in the Modelica Buildings Library (MBL).",source:"@site/docs/guide.md",sourceDirName:".",slug:"/guide",permalink:"/modelica-buildings-templates/guide",draft:!1,tags:[],version:"current",lastUpdatedBy:"AntoineGautier",lastUpdatedAt:1718979942,formattedLastUpdatedAt:"Jun 21, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"More",permalink:"/modelica-buildings-templates/category/more"}},i={},p=[{value:"Interface Class: What Shall Be Declared?",id:"interface-class",level:2},{value:"Outside Connectors Needed by Any Derived Class",id:"outside-connectors-needed-by-any-derived-class",level:3},{value:"Both the Parameter Record and Locally Accessible Design Parameters",id:"both-the-parameter-record-and-locally-accessible-design-parameters",level:3},{value:"Both the Configuration Record and Locally Accessible Configuration Parameters",id:"configuration-record",level:3},{value:"Nested Expandable Connectors",id:"nested-expandable-connectors",level:3},{value:"Components",id:"components",level:2},{value:"Replaceable Component",id:"replaceable-component",level:3},{value:"Non-replaceable Component",id:"non-replaceable-component",level:3},{value:"Section",id:"section",level:3},{value:"Main Controller",id:"main-controller",level:2},{value:"Control Section",id:"control-section",level:3},{value:"Control Parameters and Binding Equations",id:"control-parameters-and-binding-equations",level:3},{value:"Control Point Connections",id:"control-point-connections",level:3},{value:"Equipment Status",id:"equipment-status",level:3},{value:"Parameter Record",id:"parameter-record",level:2},{value:"Implementation Rules",id:"implementation-rules",level:3},{value:"Subrecord with Configuration Parameters",id:"subrecord-with-configuration-parameters",level:4},{value:"Parameter Propagation",id:"parameter-propagation",level:4},{value:"Use Only One Nesting Level",id:"use-only-one-nesting-level",level:4},{value:"Exposed Parameters",id:"exposed-parameters",level:3},{value:"Design and Operating Parameters",id:"design-and-operating-parameters",level:4},{value:"System Tags",id:"system-tags",level:4},{value:"System Schematic",id:"system-schematic",level:2},{value:"Example",id:"example",level:3},{value:"Component Icons",id:"component-icons",level:3},{value:"Graphical Primitives",id:"graphical-primitives",level:3},{value:"Vendor Specific Annotations",id:"vendor-specific-annotations",level:2},{value:"Class Annotations",id:"class-annotations",level:3},{value:"<code>__ctrlFlow_template</code>",id:"__ctrlflow_template",level:4},{value:"Declaration Annotations",id:"declaration-annotations",level:3},{value:"<code>__ctrlFlow(enable=true|false)</code>",id:"__ctrlflowenabletruefalse",level:4},{value:"Code Base",id:"code-base",level:2},{value:"Git Workflow",id:"git-workflow",level:3},{value:"Code Tags",id:"code-tags",level:3}],m={toc:p},c="wrapper";function y(e){let{components:a,...l}=e;return(0,s.yg)(c,(0,t.A)({},m,l,{components:a,mdxType:"MDXLayout"}),(0,s.yg)("h1",{id:"guide"},"Guide"),(0,s.yg)("p",null,"This document provides some requirements and recommendations for the development of HVAC system templates to be included in the ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings"},"Modelica Buildings Library")," (MBL).\nIt is primarily intended for developers and therefore contains some detailed implementation guidelines.\nFor a more conceptual presentation of MBL templates, see ",(0,s.yg)("a",{parentName:"p",href:"/more/references#Gautier23"},"Gautier (2023)"),"."),(0,s.yg)("h2",{id:"interface-class"},"Interface Class: What Shall Be Declared?"),(0,s.yg)("h3",{id:"outside-connectors-needed-by-any-derived-class"},"Outside Connectors Needed by Any Derived Class"),(0,s.yg)("admonition",{title:"Important",type:"danger"},(0,s.yg)("p",{parentName:"admonition"},"All ",(0,s.yg)("a",{parentName:"p",href:"https://specification.modelica.org/maint/3.5/connectors-and-connections.html#inside-and-outside-connectors"},"outside connectors")," must be declared within the interface class","\u2014","with the suitable conditional instance statements."),(0,s.yg)("p",{parentName:"admonition"},"(Each class extending an interface class shall not declare any outside connector","\u2014","it may only conditionally remove inherited connectors.)")),(0,s.yg)("p",null,"This ensures the ",(0,s.yg)("a",{parentName:"p",href:"https://specification.modelica.org/maint/3.5/interface-or-type-relationships.html#plug-compatibility-or-restricted-subtyping"},"plug-compatibility")," of each derived class, and implies a fixed connectivity structure for each instantiated subsystem model, allowing these instances to be connected to each other without worrying about the actual configuration of each subsystem.\nThis applies to connecting components within a template, or connecting templates to each other to create a whole-building model."),(0,s.yg)("details",null,(0,s.yg)("p",null,(0,s.yg)("em",{parentName:"p"},"How does it comply with the ",(0,s.yg)("a",{parentName:"em",href:"https://specification.modelica.org/maint/3.5/scoping-name-lookup-and-flattening.html#generation-of-the-flat-equation-system"},"Modelica Language Specification"),"?")),(0,s.yg)("p",null,"Type compatibility:"),(0,s.yg)("blockquote",null,(0,s.yg)("p",{parentName:"blockquote"},"Each reference is checked, whether it is a valid reference, e.g. the referenced object belongs to or is an instance, where all ",(0,s.yg)("em",{parentName:"p"},"existing conditional declaration expressions evaluate to true|false"),", or it is a constant in a package.")),(0,s.yg)("p",null,"So checking that the redeclared component is a subtype of the constraining class is done with all the conditional connectors considered present (even if the redeclared component removes them)."),(0,s.yg)("p",null,(0,s.yg)("em",{parentName:"p"},"How does it differ from interface classes in the Modelica Buildings Library?")),(0,s.yg)("p",null,"Interface classes are usually implemented with the minimum set of connectors (and other variables) and derived classes extend that set, which ensures ",(0,s.yg)("em",{parentName:"p"},"type")," compatibility.\nSee for example:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Fluid/Boilers/BaseClasses/PartialBoiler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Fluid/Boilers/BaseClasses/PartialBoiler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," Interfaces.TwoPortHeatMassExchanger"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(...); "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Interface class used by the model")),(0,s.yg)("div",{parentName:"code",className:"line"}),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Modelica.Blocks.Interfaces.RealInput"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," y(...)       "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Part load ratio"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Modelica.Blocks.Interfaces.RealOutput"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," T(...)      "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Temperature of the fluid"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," heatPort  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Heat port, can be used to connect to ambient"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Fluid/Boilers/BaseClasses/PartialBoiler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Fluid/Boilers/BaseClasses/PartialBoiler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#4EC9B0"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," Interfaces.TwoPortHeatMassExchanger"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"(...); "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Interface class used by the model")),(0,s.yg)("div",{parentName:"code",className:"line"}),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Modelica.Blocks.Interfaces.RealInput"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," y(...)       "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Part load ratio"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Modelica.Blocks.Interfaces.RealOutput"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," T(...)      "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Temperature of the fluid"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," heatPort  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Additional connector not declared in the interface class")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Heat port, can be used to connect to ambient"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";"))))))),(0,s.yg)("h3",{id:"both-the-parameter-record-and-locally-accessible-design-parameters"},"Both the ",(0,s.yg)("a",{parentName:"h3",href:"#parameter-record"},"Parameter Record")," and Locally Accessible Design Parameters"),(0,s.yg)("p",null,"The parameter record is for propagation of design and operating parameters across the instance tree."),(0,s.yg)("p",null,"The local design parameter declarations ensure that a standard set of parameters is available in any template or component, for any configuration.\n(For example, an evaporator coil still has ",(0,s.yg)("inlineCode",{parentName:"p"},"mChiWat_flow_nominal")," defined with a final assignment to ",(0,s.yg)("inlineCode",{parentName:"p"},"0"),".)\nThis way, one can easily compute the sum of a quantity over a set of instances.\n(For example, the total CHW flow rate over all terminal units.)"),(0,s.yg)("p",null,"Most of the local design parameters have ",(0,s.yg)("inlineCode",{parentName:"p"},"final")," assignments to the parameters from the record."),(0,s.yg)("details",null,(0,s.yg)("summary",null,"Example"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mAirSup_flow_nominal=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  dat.mAirSup_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Supply air mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mAirRet_flow_nominal=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  dat.mAirRet_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Return air mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mChiWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Total CHW mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mHeaWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Total HHW mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.HeatFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," QChiWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Total CHW heat flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Modelica.Units.SI.HeatFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," QHeaWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Total HHW heat flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(group="Nominal condition"));'))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mAirSup_flow_nominal=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  dat.mAirSup_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Supply air mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mAirRet_flow_nominal=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  dat.mAirRet_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Return air mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mChiWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Total CHW mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.MassFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mHeaWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Total HHW mass flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.HeatFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," QChiWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Total CHW heat flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Modelica.Units.SI.HeatFlowRate"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," QHeaWat_flow_nominal")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Total HHW heat flow rate"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(group="Nominal condition"));')))))),(0,s.yg)("p",null,"And the derived class:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," Buildings.Templates.AirHandlersFans.Interfaces.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mChiWat_flow_nominal="),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiCoo.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiCoo.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," mHeaWat_flow_nominal=("),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiHeaPre.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiHeaPre.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},") +")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    ("),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiHeaReh.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiHeaReh.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"),")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," QChiWat_flow_nominal="),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiCoo.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiCoo.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," QHeaWat_flow_nominal=("),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiHeaPre.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiHeaPre.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},") +")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    ("),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," coiHeaReh.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," dat.coiHeaReh.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"));"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#4EC9B0"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," Buildings.Templates.AirHandlersFans.Interfaces.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mChiWat_flow_nominal="),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiCoo.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiCoo.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," mHeaWat_flow_nominal=("),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiHeaPre.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiHeaPre.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},") +")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    ("),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiHeaReh.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiHeaReh.mWat_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"),")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," QChiWat_flow_nominal="),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiCoo.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiCoo.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," QHeaWat_flow_nominal=("),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiHeaPre.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiHeaPre.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},") +")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    ("),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," coiHeaReh.have_sou"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"then"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," dat.coiHeaReh.Q_flow_nominal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"else"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B5CEA8"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"));"))))))),(0,s.yg)("h3",{id:"configuration-record"},"Both the ",(0,s.yg)("a",{parentName:"h3",href:"#subrecord-with-configuration-parameters"},"Configuration Record")," and Locally Accessible Configuration Parameters"),(0,s.yg)("p",null,"The configuration parameters are declared in the interface class, as is the configuration record ",(0,s.yg)("inlineCode",{parentName:"p"},"cfg"),' which "groups" them into a single object more suitable for propagation.'),(0,s.yg)("p",null,'This record instance is not needed directly within a template class, but rather serves to reduce the number of parameter bindings when using a top-level parameter record (for all HVAC systems) that must access the configuration parameters of each template instance.\nIt can be considered as the "signature" for a given system configuration, accessible within any template.'),(0,s.yg)("p",null,"The instance ",(0,s.yg)("inlineCode",{parentName:"p"},"cfg")," must be ultimately assigned the ",(0,s.yg)("inlineCode",{parentName:"p"},"final")," keyword, as it should not be exposed to the user.\nContrary to design and operating parameters, the configuration parameters are propagated (with ",(0,s.yg)("inlineCode",{parentName:"p"},"final")," bindings) ",(0,s.yg)("em",{parentName:"p"},"from")," the component model ",(0,s.yg)("em",{parentName:"p"},"to")," the record instance."),(0,s.yg)("details",null,(0,s.yg)("summary",null,"Example"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"replaceable"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Buildings.Templates.AirHandlersFans.Configuration.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," cfg(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typ=typ,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanSup=typFanSup,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanRel=typFanRel,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanRet=typFanRet,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," have_souChiWat=have_souChiWat,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," have_souHeaWat=have_souHeaWat)")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Configuration parameters"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Buildings.Templates.AirHandlersFans.Types.Configuration"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typ")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Type of system"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," have_porRel=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  typ==Buildings.Templates.AirHandlersFans.Types.Configuration.ExhaustOnly")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Set to true for relief (exhaust) fluid port"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration", enable=false));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," have_souChiWat")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Set to true if system uses CHW"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," have_souHeaWat")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Set to true if system uses HHW"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanSup")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Type of supply fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanRet")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Type of return fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typFanRel")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Type of relief fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Evaluate=true, Dialog(group="Configuration"));'))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Interfaces/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"replaceable"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Buildings.Templates.AirHandlersFans.Configuration.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," cfg(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typ=typ,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanSup=typFanSup,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanRel=typFanRel,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanRet=typFanRet,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," have_souChiWat=have_souChiWat,")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," have_souHeaWat=have_souHeaWat)")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Configuration parameters"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Buildings.Templates.AirHandlersFans.Types.Configuration"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typ")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Type of system"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," have_porRel=")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  typ==Buildings.Templates.AirHandlersFans.Types.Configuration.ExhaustOnly")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Set to true for relief (exhaust) fluid port"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration", enable=false));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," have_souChiWat")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Set to true if system uses CHW"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," have_souHeaWat")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Set to true if system uses HHW"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanSup")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Type of supply fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanRet")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Type of return fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Buildings.Templates.Components.Types.Fan"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typFanRel")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Type of relief fan"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Evaluate=true, Dialog(group="Configuration"));')))))),(0,s.yg)("p",null,"And the derived class:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}}," Buildings.Templates.AirHandlersFans.Interfaces.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"redeclare"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final Buildings.Templates.AirHandlersFans.Configuration.VAVMultiZone"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," cfg(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typCoiHeaPre="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiHeaPre.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typCoiCoo="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiCoo.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typCoiHeaReh="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiHeaReh.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typValCoiHeaPre="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiHeaPre.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typValCoiCoo="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiCoo.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typValCoiHeaReh="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"coiHeaReh.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typDamOut="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.typDamOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typDamOutMin="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.typDamOutMin"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typDamRet="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.typDamRet"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typDamRel="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.typDamRel"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typSecOut="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.typSecOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typCtl="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," buiPreCon="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.buiPreCon"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," stdVen=ctl.stdVen), ...);"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#4EC9B0"}},"extends"),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}}," Buildings.Templates.AirHandlersFans.Interfaces.PartialAirHandler"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"redeclare"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final Buildings.Templates.AirHandlersFans.Configuration.VAVMultiZone"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," cfg(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typCoiHeaPre="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiHeaPre.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typCoiCoo="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiCoo.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typCoiHeaReh="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiHeaReh.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typValCoiHeaPre="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiHeaPre.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typValCoiCoo="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiCoo.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typValCoiHeaReh="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"coiHeaReh.typVal"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typDamOut="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.typDamOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typDamOutMin="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.typDamOutMin"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typDamRet="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.typDamRet"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typDamRel="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.typDamRel"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typSecOut="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.typSecOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typCtl="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.typ"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," buiPreCon="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.buiPreCon"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," stdVen=ctl.stdVen), ...);")))))),(0,s.yg)("p",null,"This allows the top-level parameter record to access all configuration parameters of a VAV instance with a single binding as follows."),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Validation/UserProject/Data/AllSystems.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Validation/UserProject/Data/AllSystems.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"outer"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," VAV VAV_1")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Instance of MZVAV model"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter Buildings.Templates.AirHandlersFans.Data.VAVMultiZone"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," dat_VAV_1(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," cfg="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"VAV_1.cfg"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", ...);"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Validation/UserProject/Data/AllSystems.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Validation/UserProject/Data/AllSystems.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"outer"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," VAV VAV_1")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Instance of MZVAV model"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter Buildings.Templates.AirHandlersFans.Data.VAVMultiZone"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," dat_VAV_1(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"final"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," cfg="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"VAV_1.cfg"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", ...);"))))))),(0,s.yg)("h3",{id:"nested-expandable-connectors"},"Nested Expandable Connectors"),(0,s.yg)("p",null,"The interface class of the ",(0,s.yg)("a",{parentName:"p",href:"#main-controller"},"main controller")," must have protected instances of all sub-buses, and these sub-bus instances must be connected to the corresponding variables from the main control bus as follows:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/ChilledWaterPlants/Components/Interfaces/PartialController.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/ChilledWaterPlants/Components/Interfaces/PartialController.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Buildings.Templates.ChilledWaterPlants.Interfaces.Bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Plant control bus"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"protected")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Buildings.Templates.Components.Interfaces.Bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," busValChiWatChiIso[nChi]")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," typValChiWatChiIso<>Buildings.Templates.Components.Types.Valve.None")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Chiller CHW isolation valve control bus"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(busValChiWatChiIso, bus.valChiWatChiIso)"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/ChilledWaterPlants/Components/Interfaces/PartialController.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/ChilledWaterPlants/Components/Interfaces/PartialController.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Buildings.Templates.ChilledWaterPlants.Interfaces.Bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Plant control bus"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"protected")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Buildings.Templates.Components.Interfaces.Bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," busValChiWatChiIso[nChi]")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#C586C0"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," typValChiWatChiIso<>Buildings.Templates.Components.Types.Valve.None")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Chiller CHW isolation valve control bus"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"(busValChiWatChiIso, bus.valChiWatChiIso)")))))),(0,s.yg)("p",null,"This is particularly important in the case of array sub-buses. We avoid pre-declaring these sub-buses in the main bus definition because this would require including structural parameters for the array size inside the bus, and thus binding these parameters for each bus instance. Instead, we use instances of sub-buses ",(0,s.yg)("em",{parentName:"p"},"in the interface class of the controller")," and the connect statement ",(0,s.yg)("inlineCode",{parentName:"p"},"connect(bus<Component>, bus.<component>)")," allows Modelica compilers to assign the correct dimensions to ",(0,s.yg)("inlineCode",{parentName:"p"},"bus.<component>")," (which is not predeclared in the bus definition)."),(0,s.yg)("h2",{id:"components"},"Components"),(0,s.yg)("h3",{id:"replaceable-component"},"Replaceable Component"),(0,s.yg)("p",null,"No ",(0,s.yg)("inlineCode",{parentName:"p"},"choicesAllMatching")," annotation is allowed in the ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates")," package (to maximize support across various Modelica tools).\nExpand into an explicit ",(0,s.yg)("inlineCode",{parentName:"p"},"choices")," annotation with proper description strings and the following rules."),(0,s.yg)("p",null,"Systematically use ",(0,s.yg)("inlineCode",{parentName:"p"},"redeclare replaceable")," in the ",(0,s.yg)("inlineCode",{parentName:"p"},"choices")," annotation to allow"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"further redeclaration by the user,"),(0,s.yg)("li",{parentName:"ul"},"visiting the parameter dialog box of the redeclared component (this is Dymola's behavior, although this behavior is automatically enabled if the redeclared component contains replaceable components).")),(0,s.yg)("h3",{id:"non-replaceable-component"},"Non-replaceable Component"),(0,s.yg)("p",null,"If a composite component (such as a ",(0,s.yg)("a",{parentName:"p",href:"#section"},"section"),") contains replaceable components, or components with configuration parameters that must be exposed, then it must be instantiated with the ",(0,s.yg)("inlineCode",{parentName:"p"},"replaceable")," keyword so that ctrl-flow generates a parameter dialog for this component, and allows the user to specify the options for the nested components."),(0,s.yg)("p",null,"This is true even if the type of the composite component is fixed.\nIn this case, the component is still declared as ",(0,s.yg)("inlineCode",{parentName:"p"},"replaceable"),", but without any ",(0,s.yg)("inlineCode",{parentName:"p"},"choices")," annotation (e.g., section ",(0,s.yg)("inlineCode",{parentName:"p"},"secOutRel")," in ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates/AirHandlersFans/VAVMultiZone.mo"),")."),(0,s.yg)("h3",{id:"section"},"Section"),(0,s.yg)("p",null,"A composite model that we call ",(0,s.yg)("em",{parentName:"p"},"section")," is needed whenever there is a hard constraint on the allowed choices for two replaceable components that are on the same composition level."),(0,s.yg)("details",null,(0,s.yg)("summary",null,"Example"),(0,s.yg)("p",null,"In the case of a multiple-zone VAV with an air economizer, a return fan should require a modulating relief damper. However, we cannot bind the redeclaration of the damper component to the redeclaration of the return fan component. So we introduce a section ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans.Components.ReliefReturnSection")," that contains the two components, so that the whole section component can be redeclared with the proper inside fan and damper components.")),(0,s.yg)("p",null,"The interface class for a section must use the same class for the control bus as the one used by the system template.\nThis is different from the base components, which have their own class for the control bus, as is implemented in ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.Components.Interfaces.Bus"),".\nThe motivation is to avoid nesting expandable connectors and to allow seamless traversal of the composition levels when connecting signal variables, see for example:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"secOutRel.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus);            "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// secOutRel is a section (instance of OutdoorReliefReturnSection)")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus);                  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// ctl is a controller (instance of G36VAVMultiZone)"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"secOutRel.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus);            "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// secOutRel is a section (instance of OutdoorReliefReturnSection)")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus);                  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// ctl is a controller (instance of G36VAVMultiZone)")))))),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Components/OutdoorReliefReturnSection.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Components/OutdoorReliefReturnSection.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"damRet.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus.damRet);        "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// connection to the damper bus inside the section"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Components/OutdoorReliefReturnSection.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Components/OutdoorReliefReturnSection.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"damRet.bus"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus.damRet);        "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// connection to the damper bus inside the section")))))),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Components/Controls/G36VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Components/Controls/G36VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.yRetDamPos"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus.damRet.y);  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// accessing the damper control variable inside the controller"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Components/Controls/G36VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Components/Controls/G36VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.yRetDamPos"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus.damRet.y);  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// accessing the damper control variable inside the controller")))))),(0,s.yg)("h2",{id:"main-controller"},"Main Controller"),(0,s.yg)("p",null,"The template is intended to be used by applications other than Modelica tools, such as ",(0,s.yg)("a",{parentName:"p",href:"https://ctrl-flow.lbl.gov/"},"ctrl-flow"),". To be compatible with these applications, the controller implementation must respect the following rules."),(0,s.yg)("h3",{id:"control-section"},"Control Section"),(0,s.yg)("p",null,'All blocks that constitute the control sequence of a system are instantiated within a single component within the template.\nThis component is referred to as the "control section" and is named ',(0,s.yg)("inlineCode",{parentName:"p"},"ctl"),". It is similar to a ",(0,s.yg)("a",{parentName:"p",href:"#section"},"section"),", see for example ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings/blob/90c974a19eac3333c1da139961c5c504797b9259/Buildings/Templates/AirHandlersFans/Components/Controls/G36VAVMultiZone.mo"},(0,s.yg)("inlineCode",{parentName:"a"},"Templates.AirHandlersFans.Components.Controls.G36VAVMultiZone")),"."),(0,s.yg)("p",null,"The component ",(0,s.yg)("inlineCode",{parentName:"p"},"ctl")," is ",(0,s.yg)("em",{parentName:"p"},"not")," CDL-compliant due to the following reasons:"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"It contains extends and redeclare statements."),(0,s.yg)("li",{parentName:"ul"},"It may include inner and outer declarations.",(0,s.yg)("ul",{parentName:"li"},(0,s.yg)("li",{parentName:"ul"},"This remains true for the VAV templates, which were the first to be developed. However, the most recently developed templates have deprecated the use of inner and outer declarations, with the exception of the requirement stated below."),(0,s.yg)("li",{parentName:"ul"},"Beyond the control section, to reference the configuration parameters from each configuration class prior to class instantiation, it is also necessary to include outer declarations within the top-level data record that stores the control parameter values."))),(0,s.yg)("li",{parentName:"ul"},"It uses expandable connectors."),(0,s.yg)("li",{parentName:"ul"},"It may have an initial equation section."),(0,s.yg)("li",{parentName:"ul"},"It employs non-permissible data types, such as ",(0,s.yg)("inlineCode",{parentName:"li"},"Modelica.Units.SI.**"),"."),(0,s.yg)("li",{parentName:"ul"},"It assigns values to parameters using variables from the equipment model, which are outside the CDL scope.")),(0,s.yg)("h3",{id:"control-parameters-and-binding-equations"},"Control Parameters and Binding Equations"),(0,s.yg)("p",null,"In contrast to the CDL implementation of the SOO, we restrict the exposed parameters to the data that are"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"scheduled in design documents by the design engineer, or"),(0,s.yg)("li",{parentName:"ul"},"provided by the testing, adjusting, and balancing contractor, or"),(0,s.yg)("li",{parentName:"ul"},"determined by the control contractor.")),(0,s.yg)("p",null,"See ",(0,s.yg)("a",{parentName:"p",href:"/more/references#Ashrae21"},"ASHRAE (2021)")," Section","\xa0","3 for typical required data."),(0,s.yg)("p",null,"These parameters are propagated by means of the ",(0,s.yg)("a",{parentName:"p",href:"#parameter-record"},"parameter record"),"."),(0,s.yg)("admonition",{title:"Important",type:"danger"},(0,s.yg)("p",{parentName:"admonition"},"Control parameters within the control section shall be assigned a value using only binding equations that involve expressions permitted in CDL: see ",(0,s.yg)("a",{parentName:"p",href:"https://obc.lbl.gov/specification/cdl.html#parameter-declaration-and-assigning-of-values-to-parameters"},"https://obc.lbl.gov/specification/cdl.html#parameter-declaration-and-assigning-of-values-to-parameters"),".")),(0,s.yg)("h3",{id:"control-point-connections"},"Control Point Connections"),(0,s.yg)("p",null,"All connect clauses between the control blocks within ",(0,s.yg)("inlineCode",{parentName:"p"},"ctl")," have a graphical annotation (so there are visible connection lines representing those connections)."),(0,s.yg)("p",null,"Most of the other connect clauses have no graphical annotation \u2014 typically the connection to a sensor or actuator signal \u2014 as this would overload the diagram view.\nInstead, a dedicated section is used at the top of the ",(0,s.yg)("inlineCode",{parentName:"p"},"equation")," section."),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/* Control point connection - start */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Inputs from AHU bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"bus.pAirSup_rel"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", ctl.dpDuc);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"bus.TOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", ctl.TOut);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Inputs from terminal bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"busTer.yReqZonPreRes"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", reqZonPreRes.u);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"busTer.yReqZonTemRes"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", reqZonTemRes.u);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Outputs to AHU bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.yMinOutDam"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus.damOutMin.y);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"ctl.y1MinOutDam"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", bus.damOutMin.y1);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Outputs to terminal unit bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"TAirSupSet.y"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", busTer.TAirSupSet);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"TAirSup.y"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", busTer.TAirSup);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/* Control point connection - stop */"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/VAVMultiZone.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/VAVMultiZone.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"/* Control point connection - start */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Inputs from AHU bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"bus.pAirSup_rel"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", ctl.dpDuc);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"bus.TOut"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", ctl.TOut);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Inputs from terminal bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"busTer.yReqZonPreRes"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", reqZonPreRes.u);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"busTer.yReqZonTemRes"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", reqZonTemRes.u);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Outputs to AHU bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.yMinOutDam"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus.damOutMin.y);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"ctl.y1MinOutDam"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", bus.damOutMin.y1);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// Outputs to terminal unit bus")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"TAirSupSet.y"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", busTer.TAirSupSet);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"TAirSup.y"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", busTer.TAirSup);")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"/* Control point connection - stop */")))))),(0,s.yg)("p",null,"Note that the control section uses the same class for the control bus as the one used by the system template."),(0,s.yg)("admonition",{type:"tip"},(0,s.yg)("p",{parentName:"admonition"},"Use the same name for the signal variable and for the component it originates from.")),(0,s.yg)("p",null,"Inside the control section, connections to variables within nested expandable connectors should be done by means of the ",(0,s.yg)("a",{parentName:"p",href:"#nested-expandable-connectors"},"local instances of sub-buses")," to guarantee that Modelica compilers assign correct dimensions to these variables.\nSee the example in ",(0,s.yg)("a",{parentName:"p",href:"/more/references#Gautier23"},"Gautier (2023)")," Section","\xa0","5. See also:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/ChilledWaterPlants/Components/Controls/G36.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/ChilledWaterPlants/Components/Controls/G36.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/* Control point connection - start */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"busChi.y1ChiWatReq"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", ctl.uChiWatReq);  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// as opposed to connect(bus.chi.y1ChiWatReq, ctl.uChiWatReq)"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/ChilledWaterPlants/Components/Controls/G36.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/ChilledWaterPlants/Components/Controls/G36.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"equation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"/* Control point connection - start */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#DCDCAA"}},"connect"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"busChi.y1ChiWatReq"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},", ctl.uChiWatReq);  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// as opposed to connect(bus.chi.y1ChiWatReq, ctl.uChiWatReq)")))))),(0,s.yg)("h3",{id:"equipment-status"},"Equipment Status"),(0,s.yg)("p",null,"An ad hoc ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings/blob/05e02f395bbfae2ad0430936620b09e7823cae63/Buildings/Templates/Components/Controls/StatusEmulator.mo"},"component")," has been developed to emulate the equipment status and should be used systematically."),(0,s.yg)("p",null,"The only exception applies to equipment models (like ",(0,s.yg)("inlineCode",{parentName:"p"},"Fluid.Actuators.Dampers.Exponential"),")\nthat already provide a feedback signal as an output (for example ",(0,s.yg)("inlineCode",{parentName:"p"},"y_actual")," for actuator and mover models).\nHowever, if ",(0,s.yg)("inlineCode",{parentName:"p"},"use_inputFilter=false")," then ",(0,s.yg)("inlineCode",{parentName:"p"},"y_actual")," is directly connected to the input signal ",(0,s.yg)("inlineCode",{parentName:"p"},"y"),", potentially creating an algebraic loop if the control logic uses the equipment status."),(0,s.yg)("admonition",{title:"Open Issue",type:"caution"},(0,s.yg)("p",{parentName:"admonition"},"Switching to using ",(0,s.yg)("inlineCode",{parentName:"p"},"StatusEmulator")," instead of ",(0,s.yg)("inlineCode",{parentName:"p"},"y_actual")," if ",(0,s.yg)("inlineCode",{parentName:"p"},"use_inputFilter=false")," is being implemented through ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings/issues/3499"},"#3499"),".")),(0,s.yg)("h2",{id:"parameter-record"},"Parameter Record"),(0,s.yg)("p",null,"All design and operating parameters are declared within a Modelica record class. This record is used to"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"assign design and operating parameter values for all subcomponents,"),(0,s.yg)("li",{parentName:"ul"},"support parameter propagation from a top-level, whole HVAC system parameter record,"),(0,s.yg)("li",{parentName:"ul"},"populate the ",(0,s.yg)("a",{parentName:"li",href:"https://docs.google.com/document/d/16Z8HqTi3vNV3HUaa4ijBPVSQvA4MyGTu8bxoGTBD2YI/edit?usp=sharing"},"equipment schedule in the UI"),".")),(0,s.yg)("h3",{id:"implementation-rules"},"Implementation Rules"),(0,s.yg)("h4",{id:"subrecord-with-configuration-parameters"},"Subrecord with Configuration Parameters"),(0,s.yg)("p",null,"Within the parameter record, all configuration parameters are (only) accessible via an instance of the configuration record ",(0,s.yg)("inlineCode",{parentName:"p"},"cfg"),".\nThis instance uses the annotation ",(0,s.yg)("inlineCode",{parentName:"p"},"annotation (Dialog(enable=false))")," as it should not be exposed to the user","\u2014","and record classes do not allow for protected elements, and this instance cannot be ",(0,s.yg)("inlineCode",{parentName:"p"},"final")," as it is overridden."),(0,s.yg)("admonition",{type:"note"},(0,s.yg)("p",{parentName:"admonition"},'The final override is debatable and the bindings of record instances containing final parameter assignments appear to be under-specified.\nAs a result, the behavior varies across Modelica tools. And even for a given tool, it varies with the constructs being used (such as inheritance or direct definition).\nDymola sometimes (see SRF00860858) triggers a "final overriding" error when a record instance contains final bindings and the record itself is propagated from a higher composition level.\nOCT never yields a warning.')),(0,s.yg)("p",null,"When instantiated within the interface class, the parameter record uses a binding with the ",(0,s.yg)("a",{parentName:"p",href:"#configuration-record"},"local instance of the configuration record"),", i.e., ",(0,s.yg)("inlineCode",{parentName:"p"},"dat(cfg=cfg)"),".\nHere again, because this binding will be overridden when propagated ",(0,s.yg)("inlineCode",{parentName:"p"},"dat")," from a top-level whole-building record, the ",(0,s.yg)("inlineCode",{parentName:"p"},"final")," keyword must not be used in this binding."),(0,s.yg)("h4",{id:"parameter-propagation"},"Parameter Propagation"),(0,s.yg)("p",null,"Parameter propagation is implemented as follows."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"Configuration parameters are assigned ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"from"))," the component model ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"to"))," the record, and propagated ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"up"))," the instance tree."),(0,s.yg)("li",{parentName:"ul"},"Design and operating parameters are assigned ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"from"))," the record ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"to"))," the component model, and propagated ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"down"))," the instance tree.")),(0,s.yg)("p",null,"The record for the ",(0,s.yg)("a",{parentName:"p",href:"#control-section"},"controller section")," needs to be instantiated (not extended) in the master record because it requires many configuration parameters (such as ",(0,s.yg)("inlineCode",{parentName:"p"},"typFanSup"),") that have duplicates in the master record."),(0,s.yg)("p",null,"At the component level, we instantiate the parameter record as ",(0,s.yg)("inlineCode",{parentName:"p"},"dat")," and bind (with ",(0,s.yg)("inlineCode",{parentName:"p"},"final"),") local design and operating parameters to the record elements."),(0,s.yg)("details",null,(0,s.yg)("p",null,"This implementation is similar to the one from ",(0,s.yg)("inlineCode",{parentName:"p"},"Fluid.Chillers.ElectricEIR"),"."),(0,s.yg)("p",null,"However, other classes such as ",(0,s.yg)("inlineCode",{parentName:"p"},"Fluid.Actuators.BaseClasses.PartialTwoWayValve")," extend the parameter class ",(0,s.yg)("inlineCode",{parentName:"p"},"Fluid.Actuators.BaseClasses.ValveParameters")," to integrate the parameter definitions in a flat structure.")),(0,s.yg)("p",null,"This allows simpler propagation (only the record is passed in) which is agnostic from the parameter structure of the constraining class (for example ",(0,s.yg)("inlineCode",{parentName:"p"},"mWat_flow_nominal")," is not defined in ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.Components.Coils.Interfaces.PartialCoil"),")."),(0,s.yg)("h4",{id:"use-only-one-nesting-level"},"Use Only One Nesting Level"),(0,s.yg)("p",null,"If needed, component records must extend (not instantiate) subcomponent records.\nFor example in ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.Components.Coils.Interfaces.Data"),":"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"the class cannot extend ",(0,s.yg)("inlineCode",{parentName:"li"},"Templates.Components.Valves.Interfaces.Data")," because of the colliding declarations of ",(0,s.yg)("inlineCode",{parentName:"li"},"typ"),","),(0,s.yg)("li",{parentName:"ul"},"so ",(0,s.yg)("inlineCode",{parentName:"li"},"dpValve_nominal")," is declared locally and a protected record with the type ",(0,s.yg)("inlineCode",{parentName:"li"},"Templates.Components.Valves.Interfaces.Data")," is constructed to pass in parameters to the valve component.")),(0,s.yg)("h3",{id:"exposed-parameters"},"Exposed Parameters"),(0,s.yg)("h4",{id:"design-and-operating-parameters"},"Design and Operating Parameters"),(0,s.yg)("p",null,"In addition to the configuration parameters, the record contains all design and operating parameters required"),(0,s.yg)("ol",null,(0,s.yg)("li",{parentName:"ol"},"by the sequence of operation for all possible system configurations, see ",(0,s.yg)("a",{parentName:"li",href:"/more/references#Ashrae21"},"ASHRAE (2021)")," Section 3,"),(0,s.yg)("li",{parentName:"ol"},"for sizing equipment models (most of these parameters are already included in 1.).")),(0,s.yg)("p",null,'Modeling and parameters from the "Advanced" dialog tab ',(0,s.yg)("strong",{parentName:"p"},(0,s.yg)("em",{parentName:"strong"},"shall not be included"))," in this record.\nThe record should be viewed as a digital avatar of the manufacturer\u2019s data sheet for a given system, and as such, should only contain equipment and control parameters that HVAC designers are familiar with."),(0,s.yg)("p",null,"The set of required parameters depends on the actual system configuration.\nHowever, MLS does not allow parameters to be conditionally instantiated. (More precisely, conditional components can only be used in connect statements, which prevents the use of conditional parameters.)\nAs a workaround, we use parameter declarations with"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"an ",(0,s.yg)("inlineCode",{parentName:"li"},"enable")," annotation, and"),(0,s.yg)("li",{parentName:"ul"},"an explicit ",(0,s.yg)("inlineCode",{parentName:"li"},"start")," attribute.")),(0,s.yg)("details",null,(0,s.yg)("p",null,"From the language specification:"),(0,s.yg)("blockquote",null,(0,s.yg)("p",{parentName:"blockquote"},"If ",(0,s.yg)("inlineCode",{parentName:"p"},"enable = false"),", the input field may be disabled and no input can be given.")),(0,s.yg)("p",null,"In our case, if the ",(0,s.yg)("inlineCode",{parentName:"p"},"enable"),' attribute evaluates to false, these parameters are actually not used in the flat equation system \u2014 after removing the conditional components with false condition and taking into account all redeclarations. We use the start attribute to provide a "placeholder" value that has no impact whatsoever on the simulation results.'),(0,s.yg)("p",null,"For more details, refer to Section 6.2 and Listing 2 of ",(0,s.yg)("a",{parentName:"p",href:"/more/references#Gautier23"},"Gautier (2023)"),".")),(0,s.yg)("h4",{id:"system-tags"},"System Tags"),(0,s.yg)("p",null,"System tags are optional parameters that are not used for simulation but nevertheless included in the parameter record of each template to support future workflow automation (e.g., parameterization of a template by means of an external ",(0,s.yg)("a",{parentName:"p",href:"https://docs.google.com/document/d/16Z8HqTi3vNV3HUaa4ijBPVSQvA4MyGTu8bxoGTBD2YI/edit?usp=sharing"},"equipment schedule"),")."),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"Templates/AirHandlersFans/Data/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Data/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," id="),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"System tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(tab="Advanced"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," id_souChiWat="),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"CHW supply system tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(tab="Advanced", enable=have_souChiWat));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," id_souHeaWat="),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"HHW supply system tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(tab="Advanced", enable=have_souHeaWat));'))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus with-title",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"},title:"Templates/AirHandlersFans/Data/PartialAirHandler.mo"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"Templates/AirHandlersFans/Data/PartialAirHandler.mo"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," id="),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"System tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(tab="Advanced"));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," id_souChiWat="),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"CHW supply system tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(tab="Advanced", enable=have_souChiWat));')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"String"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," id_souHeaWat="),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'""')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"HHW supply system tag"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(tab="Advanced", enable=have_souHeaWat));')))))),(0,s.yg)("h2",{id:"system-schematic"},"System Schematic"),(0,s.yg)("p",null,"Refer to the ",(0,s.yg)("a",{parentName:"p",href:"https://lbl-srg.github.io/ctrl-flow/requirements.html#engineering-schematic"},"specification for the generation of engineering schematics")," if needed."),(0,s.yg)("h3",{id:"example"},"Example"),(0,s.yg)("p",null,"Below is an illustration of the kind of schematic (or control diagram) we want to generate, taken from ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings/blob/4efb7ed6e0f307f339714a6b238e52922f193234/Buildings/Templates/HeatingPlants/HotWater/Validation/BoilerPlant.mo"},(0,s.yg)("inlineCode",{parentName:"a"},"Templates.HeatingPlants.HotWater.Validation.BoilerPlant"))," in branch ",(0,s.yg)("inlineCode",{parentName:"p"},"issue3266_template_HW_plant"),', using Dymola\'s feature "Show Component".'),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"schmatic",src:n(6961).A,width:"1922",height:"1158"})),(0,s.yg)("h3",{id:"component-icons"},"Component Icons"),(0,s.yg)("admonition",{title:"Modelica tool support",type:"caution"},(0,s.yg)("p",{parentName:"admonition"},"Currently the SVG graphics integrated using class annotations such as ",(0,s.yg)("inlineCode",{parentName:"p"},"Icon(graphics={Bitmap(fileName=<svg-file-path>, visible=<boolean-expression>))")," are"),(0,s.yg)("ul",{parentName:"admonition"},(0,s.yg)("li",{parentName:"ul"},"not supported by Modelon Impact: ticket open at Modelon#2022042039000931 on the roadmap for the 2023.1 release,"),(0,s.yg)("li",{parentName:"ul"},"not fully supported by OMEdit: most likely due to ",(0,s.yg)("inlineCode",{parentName:"li"},"<boolean-expression>")," not being evaluated at UI runtime,"),(0,s.yg)("li",{parentName:"ul"},"entirely supported by Dymola ",(0,s.yg)("inlineCode",{parentName:"li"},">=2022.x"),"."))),(0,s.yg)("p",null,"The master SVG document containing all raw icons provided by Taylor Engineering and used in ",(0,s.yg)("a",{parentName:"p",href:"/more/references#Ashrae21"},"ASHRAE (2021)")," is currently located at ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/modelica-buildings/blob/90c974a19eac3333c1da139961c5c504797b9259/Buildings/Resources/Images/Templates/Icons.svg"},(0,s.yg)("inlineCode",{parentName:"a"},"Resources/Images/Templates/Icons.svg")),"."),(0,s.yg)("p",null,"Those raw icons must be processed as described below for Inkscape ",(0,s.yg)("inlineCode",{parentName:"p"},">=1.1")," before being used in the icon layers of Modelica classes."),(0,s.yg)("details",null,(0,s.yg)("p",null,"The requirements below stem from the following observations."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"The ",(0,s.yg)("a",{parentName:"li",href:"https://specification.modelica.org/maint/3.5/annotations.html#common-definitions"},"Modelica Language Specification")," specifies ",(0,s.yg)("inlineCode",{parentName:"li"},'type DrawingUnit = Real(final unit="mm")'),"."),(0,s.yg)("li",{parentName:"ul"},"The default icon layer size in Dymola is ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"200"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"200")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"200 \\times 200")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"))))),"\xa0","mm (",(0,s.yg)("inlineCode",{parentName:"li"},"{{-100,-100},{100,100}}"),"). This corresponds to ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"10"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"10")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"10 \\times 10")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"10"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"10"))))),"\xa0","cells in the icon view. So one cell corresponds to ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"20"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"20")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"20 \\times 20")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"20"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"20"))))),"\xa0","mm."),(0,s.yg)("li",{parentName:"ul"},"When instantiated, a component has its icon scaled by a factor ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"1"),(0,s.yg)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,s.yg)("mn",{parentName:"mrow"},"10")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1/10")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"1/10")))))," in the diagram layer. For example, a ",(0,s.yg)("inlineCode",{parentName:"li"},"Line")," object with ",(0,s.yg)("inlineCode",{parentName:"li"},"thickness=5")," in the icon layer is rendered as a ",(0,s.yg)("inlineCode",{parentName:"li"},"Line")," object with ",(0,s.yg)("inlineCode",{parentName:"li"},"thickness=0.5")," in the diagram layer."),(0,s.yg)("li",{parentName:"ul"},"When ",(0,s.yg)("inlineCode",{parentName:"li"},"thickness < 0.25"),", the stroke width remains unchanged in Dymola: so ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.2")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.2")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.2")))))," and ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.1")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.1")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.1")))))," yield the same stroke width."),(0,s.yg)("li",{parentName:"ul"},"It seems that Dymola handles Bitmap objects as squares, i.e., the objects are scaled by the minimum of the ",(0,s.yg)("inlineCode",{parentName:"li"},"x")," and ",(0,s.yg)("inlineCode",{parentName:"li"},"y")," dimensions. Having external SVG files with equal height and width makes it easier to position and scale the graphical objects."))),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"Select object, copy to new file."),(0,s.yg)("li",{parentName:"ul"},"Change stroke color to black and stroke width to ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"1")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"1"))))),"\xa0","mm."),(0,s.yg)("li",{parentName:"ul"},"Account for ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"20")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"20")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"20"))))),"\xa0","mm for each grid cell in Dymola icon layer.",(0,s.yg)("ul",{parentName:"li"},(0,s.yg)("li",{parentName:"ul"},"So the default icon layer size of ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"10"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"10")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"10 \\times 10")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"10"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"10"))))),"\xa0","cells in Dymola corresponds to a page size of ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"200"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"200")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"200 \\times 200")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"))))),"\xa0","mm in Inkscape."))),(0,s.yg)("li",{parentName:"ul"},"For most of the AHU components, lock width/height ratio and change height to ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"200")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"200")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"))))),"\xa0","mm.",(0,s.yg)("ul",{parentName:"li"},(0,s.yg)("li",{parentName:"ul"},"For transducers, ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"200")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"200")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"))))),"\xa0","mm is for the probe, ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"80")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"80")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"80"))))),"\xa0","mm is for the sensor casing."))),(0,s.yg)("li",{parentName:"ul"},"For polygons, the different segments will typically not be connected together (gap at each corner), so select each segment with ",(0,s.yg)("inlineCode",{parentName:"li"},"Node")," tool and use ",(0,s.yg)("inlineCode",{parentName:"li"},"Node")," functionalities to",(0,s.yg)("ul",{parentName:"li"},(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"Convert selected objects to path")),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"Join selected nodes")),(0,s.yg)("li",{parentName:"ul"},"For the last corner use ",(0,s.yg)("inlineCode",{parentName:"li"},"Path/Union")))),(0,s.yg)("li",{parentName:"ul"},"Text should be in sans-serif with font size of ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"120")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"120")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"120"))))),".",(0,s.yg)("ul",{parentName:"li"},(0,s.yg)("li",{parentName:"ul"},"If needed (typically in case of specific text orientation), select text object and transform to path with ",(0,s.yg)("inlineCode",{parentName:"li"},"Path/Object to Path"),"."))),(0,s.yg)("li",{parentName:"ul"},"Set the page size with the same height and width (typically ",(0,s.yg)("span",{parentName:"li",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"200"),(0,s.yg)("mo",{parentName:"mrow"},"\xd7"),(0,s.yg)("mn",{parentName:"mrow"},"200")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"200 \\times 200")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.yg)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.yg)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"200"))))),"\xa0","mm) and center icons in the page."),(0,s.yg)("li",{parentName:"ul"},"Save as Inkscape SVG.")),(0,s.yg)("h3",{id:"graphical-primitives"},"Graphical Primitives"),(0,s.yg)("p",null,"In addition to external SVG files, the schematics may use Modelica graphical primitives with the following conventions."),(0,s.yg)("table",null,(0,s.yg)("thead",{parentName:"table"},(0,s.yg)("tr",{parentName:"thead"},(0,s.yg)("th",{parentName:"tr",align:null},"Equipment"),(0,s.yg)("th",{parentName:"tr",align:null},"Primitive"),(0,s.yg)("th",{parentName:"tr",align:null},"Icon layer"),(0,s.yg)("th",{parentName:"tr",align:null},"Diagram layer"))),(0,s.yg)("tbody",{parentName:"table"},(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},"Supply pipe (*)"),(0,s.yg)("td",{parentName:"tr",align:null},"Line, solid"),(0,s.yg)("td",{parentName:"tr",align:null},"Thickness ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.5")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.5")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.5")))))),(0,s.yg)("td",{parentName:"tr",align:null},"Thickness ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"5")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"5")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"5"))))))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},"Return pipe (*)"),(0,s.yg)("td",{parentName:"tr",align:null},"Line, dashed"),(0,s.yg)("td",{parentName:"tr",align:null},"Thickness ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.5")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.5")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.5")))))),(0,s.yg)("td",{parentName:"tr",align:null},"Thickness ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"5")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"5")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"5"))))))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},"Duct wall"),(0,s.yg)("td",{parentName:"tr",align:null},"Line, solid"),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),")"),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),")")),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},"Capillary tube (pressure sensor)"),(0,s.yg)("td",{parentName:"tr",align:null},"Polygon or rectangle"),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),"), width ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"10")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"10")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"10")))))),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),"), width ",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"1")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"1"))))))),(0,s.yg)("tr",{parentName:"tbody"},(0,s.yg)("td",{parentName:"tr",align:null},"Motor shaft (actuator), connection between sensor and transmitter"),(0,s.yg)("td",{parentName:"tr",align:null},"Line, solid"),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),")"),(0,s.yg)("td",{parentName:"tr",align:null},"Default thickness (",(0,s.yg)("span",{parentName:"td",className:"math math-inline"},(0,s.yg)("span",{parentName:"span",className:"katex"},(0,s.yg)("span",{parentName:"span",className:"katex-mathml"},(0,s.yg)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.yg)("semantics",{parentName:"math"},(0,s.yg)("mrow",{parentName:"semantics"},(0,s.yg)("mn",{parentName:"mrow"},"0.25")),(0,s.yg)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0.25")))),(0,s.yg)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.yg)("span",{parentName:"span",className:"base"},(0,s.yg)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.yg)("span",{parentName:"span",className:"mord"},"0.25"))))),")")))),(0,s.yg)("p",null,(0,s.yg)("em",{parentName:"p"},"(","*",") This should be specified as a graphical annotation to the corresponding connect statement.")),(0,s.yg)("p",null,"Graphical primitives that need to be pruned to generate the system schematic shall use the annotation ",(0,s.yg)("inlineCode",{parentName:"p"},"visible=viewDiagramAll")," where ",(0,s.yg)("inlineCode",{parentName:"p"},"viewDiagramAll")," is declared in the template interface class with:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," viewDiagramAll="),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"false")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"Set to true to view all component icons in diagram view"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'annotation (Dialog(tab="Graphics"));'))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"inner"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"parameter"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"Boolean"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," viewDiagramAll="),(0,s.yg)("span",{parentName:"div",style:{color:"#569CD6"}},"false")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},'"Set to true to view all component icons in diagram view"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},'annotation (Dialog(tab="Graphics"));')))))),(0,s.yg)("h2",{id:"vendor-specific-annotations"},"Vendor Specific Annotations"),(0,s.yg)("p",null,"Vendor annotations are either"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"hierarchical annotations in the form of ",(0,s.yg)("inlineCode",{parentName:"li"},'"__ctrlFlow" class-modification'),", using strict camel case formatting for any argument in the class modification, or"),(0,s.yg)("li",{parentName:"ul"},"simple annotations in the form of ",(0,s.yg)("inlineCode",{parentName:"li"},'"__ctrlFlow" "_" IDENT'),".")),(0,s.yg)("h3",{id:"class-annotations"},"Class Annotations"),(0,s.yg)("h4",{id:"__ctrlflow_template"},(0,s.yg)("inlineCode",{parentName:"h4"},"__ctrlFlow_template")),(0,s.yg)("p",null,"Ctrl-flow searches for this annotation and returns a list of files which are then treated as entry points to build the tree of system types. Both packages (corresponding to system types such as ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans"),") and template classes (such as ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans.VAVMultiZone"),") shall contain this annotation."),(0,s.yg)("p",null,"So the file arborescence:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"Templates")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 AirHandlersFans")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 package.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 VAVMultiZone.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 Components")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 Data")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 AllSystems.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 package.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 package.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 package.order")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 Types.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u251c\u2500\u2500 UsersGuide.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2514\u2500\u2500 ZoneEquipment")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    \u251c\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    \u251c\u2500\u2500 package.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    \u251c\u2500\u2500 VAVBoxCoolingOnly.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    \u2514\u2500\u2500 VAVBoxReheat.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"# Contains __ctrlFlow_template annotation"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"Templates")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 AirHandlersFans")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 package.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 VAVMultiZone.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 Components")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 Data")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 AllSystems.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u251c\u2500\u2500 package.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2502\xa0\xa0 \u2514\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 package.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 package.order")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 Types.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u251c\u2500\u2500 UsersGuide.mo")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2514\u2500\u2500 ZoneEquipment")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    \u251c\u2500\u2500 ...")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    \u251c\u2500\u2500 package.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    \u251c\u2500\u2500 VAVBoxCoolingOnly.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"# Contains __ctrlFlow_template annotation")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"    \u2514\u2500\u2500 VAVBoxReheat.mo  "),(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"# Contains __ctrlFlow_template annotation")))))),(0,s.yg)("p",null,"yields the following UI objects:"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"control",src:n(4671).A,width:"1506",height:"715"})),(0,s.yg)("details",null,(0,s.yg)("summary",null,"Alternative Approach Discussed With DEPT but Not Implemented"),(0,s.yg)("blockquote",null,(0,s.yg)("p",{parentName:"blockquote"},"We should rather use a flag indicating that a package (in our case ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates"),') is to be considered as the "root" for all template URIs, for example: ',(0,s.yg)("inlineCode",{parentName:"p"},'__ctrlFlow(routing="root")'),". And for each template class (for example ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans.VAVMultiZone"),"): ",(0,s.yg)("inlineCode",{parentName:"p"},'__ctrlFlow(routing="template")'),'. The contract for the template developer will then be that the class URI dictates the explorer tree structure, starting from the "root" package (necessarily unique inside a library). For example, the template ',(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans.VAVMultiZone")," with the above annotation would yield the following tree structure."),(0,s.yg)("div",{parentName:"blockquote",className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"AirHandlersFans")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"\u2514\u2500\u2500 VAVMultiZone"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"AirHandlersFans")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"\u2514\u2500\u2500 VAVMultiZone")))))),(0,s.yg)("p",{parentName:"blockquote"},"Without having to add any annotation to the subpackage ",(0,s.yg)("inlineCode",{parentName:"p"},"Templates.AirHandlersFans"),". So we would implicitly consider each folder between ",(0,s.yg)("inlineCode",{parentName:"p"},'routing="template"')," and ",(0,s.yg)("inlineCode",{parentName:"p"},'routing="root"'),' to be a template category (like "Air Handlers and Fans").'))),(0,s.yg)("h3",{id:"declaration-annotations"},"Declaration Annotations"),(0,s.yg)("h4",{id:"__ctrlflowenabletruefalse"},(0,s.yg)("inlineCode",{parentName:"h4"},"__ctrlFlow(enable=true|false)")),(0,s.yg)("p",null,"Each declaration or ",(0,s.yg)("inlineCode",{parentName:"p"},"extends")," statement may have a hierarchical annotation ",(0,s.yg)("inlineCode",{parentName:"p"},'"__ctrlFlow" "(" "enable" "=" logical-expression ")"')," that allows disabling input fields in the ctrl-flow configuration dialog. This is similar to the Modelica annotation ",(0,s.yg)("inlineCode",{parentName:"p"},"Dialog(enable=true|false)")," but provides additional flexibility and allows disabling all parameter input fields that are brought in by an ",(0,s.yg)("inlineCode",{parentName:"p"},"extends")," statement."),(0,s.yg)("p",null,"It takes precedence over the standard annotation ",(0,s.yg)("inlineCode",{parentName:"p"},"Dialog(enable)"),"."),(0,s.yg)("p",null,"Typical use cases include classes from the Modelica Buildings Library that contain definitions of detailed simulation parameters and that are extended to define template components, or package classes used to specify the fluid properties."),(0,s.yg)("details",null,(0,s.yg)("summary",null,"Boolean Literal or Expression?"),(0,s.yg)("p",null,"Although only Boolean literals are used in the templates as of commit 675801b669, the expression evaluation engine is invoked when parsing ",(0,s.yg)("inlineCode",{parentName:"p"},"__ctrlFlow(enable...)"),", see ",(0,s.yg)("a",{parentName:"p",href:"https://github.com/lbl-srg/ctrl-flow-dev/blob/e2bb34ca76e0d1ed7413691a89ffd8525e16c750/server/src/parser/parser.ts#L296-L317"},"https://github.com/lbl-srg/ctrl-flow-dev/blob/e2bb34ca76e0d1ed7413691a89ffd8525e16c750/server/src/parser/parser.ts#L296-L317"),". So in practice, Boolean expressions could be used.")),(0,s.yg)("h2",{id:"code-base"},"Code Base"),(0,s.yg)("h3",{id:"git-workflow"},"Git Workflow"),(0,s.yg)("p",null,"Each new development should start by branching out from the master branch of the Modelica Buildings Library."),(0,s.yg)("h3",{id:"code-tags"},"Code Tags"),(0,s.yg)("p",null,"The development of templates usually requires several iterations with the author of the CDL implementation of the SOO.\nThis takes time. Code tags have proven useful in this context."),(0,s.yg)("p",null,"We adopt the code tags from ",(0,s.yg)("a",{parentName:"p",href:"https://peps.python.org/pep-0350/#mnemonics"},"PEP 350")," to reference issues and feature enhancements directly in the Modelica code base.\nAll tags should include one of the tag names below in all caps, followed by the name, e-mail address, or other identifier of the person with the best context about the problem, and the GH issue number if available.\nWe keep it simple and only use:"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"BUG")," for what prevents from translating or simulating a model: ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"should prevent merging"))),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"FIXME")," for any problematic code not suitable for production: ",(0,s.yg)("strong",{parentName:"li"},(0,s.yg)("em",{parentName:"strong"},"should prevent merging")),", include ",(0,s.yg)("a",{parentName:"li",href:"https://peps.python.org/pep-0350/#mnemonics"},"PEP 350")," ",(0,s.yg)("inlineCode",{parentName:"li"},"TODO")," under that code tag"),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"HACK")," mainly for workarounds related to Modelica tools' limitations: reference the ticket number from the Modelica tool provider if available"),(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("inlineCode",{parentName:"li"},"RFE")," for a clearly identified development need (as opposed to an idea)")),(0,s.yg)("p",null,"For example:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// FIXME(AntoineGautier #1913): Should be conditional, depending on have_fanRel."))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"mo"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#6A9955"}},"// FIXME(AntoineGautier #1913): Should be conditional, depending on have_fanRel.")))))),(0,s.yg)("p",null,"So we can collect all code tags with:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus",style:{backgroundColor:"#FFFFFF",color:"#000000"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"grep -nER "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},"'(^|/(\\*|/)|\x3c!--|\")\\s*(BUG|FIXME|HACK|RFE)'"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," Templates/."))))),(0,s.yg)("pre",{parentName:"div",className:"shiki dark-plus",style:{backgroundColor:"#1E1E1E",color:"#D4D4D4"}},(0,s.yg)("div",{parentName:"pre",className:"language-id"},"sh"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}},"grep -nER "),(0,s.yg)("span",{parentName:"div",style:{color:"#CE9178"}},"'(^|/(\\*|/)|\x3c!--|\")\\s*(BUG|FIXME|HACK|RFE)'"),(0,s.yg)("span",{parentName:"div",style:{color:"#D4D4D4"}}," Templates/.")))))))}y.isMDXComponent=!0},6961:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/HWPlant-31373e82ee60e32d2c0669373c08cde5.png"},4671:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/list_systems_ui-f5a66335e3295c92e48c1e8880f87913.png"}}]);